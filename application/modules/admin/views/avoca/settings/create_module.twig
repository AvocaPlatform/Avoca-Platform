{% extends 'layouts/admin.twig' %}

{% block content %}
    <div class="row">
        <div class="col-sm-12 mb-4">
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active show" data-toggle="tab" href="#ModuleInfo" role="tab" aria-controls="home" aria-selected="true">
                        <i class="icon-calculator"></i> {{ 'Create module'|lang }}
                        <span class="badge badge-success">New</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#ModuleFieldInfo" role="tab" aria-controls="home" aria-selected="true">
                        <i class="icon-calculator"></i> {{ 'Fields'|lang }}
                        <span class="badge badge-success">New</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#ModuleRelateInfo" role="tab" aria-controls="home" aria-selected="true">
                        <i class="icon-calculator"></i> {{ 'Relationship'|lang }}
                        <span class="badge badge-success">New</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#ModuleListView" role="tab" aria-controls="home" aria-selected="true">
                        <i class="icon-calculator"></i> {{ 'List view'|lang }}
                        <span class="badge badge-success">New</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#ModuleRecordView" role="tab" aria-controls="home" aria-selected="true">
                        <i class="icon-calculator"></i> {{ 'Record view'|lang }}
                        <span class="badge badge-success">New</span>
                    </a>
                </li>
            </ul>

            <div class="tab-content">

                <div class="tab-pane active show" id="ModuleInfo">
                    <div class="card mb-0">
                        <div class="card-body">
                            <div class="form-group">
                                <label>{{ 'Module name'|lang }}</label>
                                {{ form_input('module', module.model, {class: 'form-control'}) }}
                            </div>

                            <div class="form-group">
                                <label>{{ 'Model name'|lang }}</label>
                                {{ form_input('model', module.model, {class: 'form-control'}) }}
                            </div>

                            <div class="form-group">
                                <label>{{ __('Database table') }}</label>
                                {{ form_input('table', module.table, {class: 'form-control'}) }}
                            </div>
                        </div>
                        <div class="card-footer">
                            <button type="button" class="btn btn-primary" id="btnCreateModule">{{ __('Create module') }}</button>
                            <a href="{{ avoca_admin('/settings') }}" class="btn btn-link">{{ 'Cancel'|lang }}</a>
                        </div>
                    </div>
                </div>

                <div class="tab-pane active show" id="ModuleFieldInfo">

                </div>

                <div class="tab-pane active show" id="ModuleRelateInfo">

                </div>

                <div class="tab-pane active show" id="ModuleListView">

                </div>

                <div class="tab-pane active show" id="ModuleRecordView">

                </div>

            </div>
        </div>
    </div>
{% endblock %}

{% block jsLive %}
    <script>
        $(function () {
            $('#btnCreateModule').click(function () {
                $.post('{{ avoca_admin('/settings/create_module') }}', {
                    module: $('input[name=module]').val()
                }, function (data) {
                    console.log(data);
                });
            });
        });
    </script>
{% endblock %}
